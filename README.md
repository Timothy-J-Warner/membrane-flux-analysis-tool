# Permeance Analysis Software

## Table of Contents

- About The Project
  -Built With
- Features
- Installation
  - Prerequisites
  - Installation Steps
- Usage
- Configuration
- Contributing
- License
- Contact
- Acknowledgements

## About The Project

The program was written to rapidly calculate the water flux of hollow fiber membranes from time-mass data generated by data-logging load cells, input values describing the properties of the membranes, and specified test conditions including time at which the flux testing window should begin and the test pressure at the test time. The program applies data smoothing to reduce fluctuations in the mass data generated by the loadcells then uses changes in mass and properties on the membranes to calculate flux.

It currently has the following limitations and known bugs:
- Time-mass data must be 1 measurement per second.
- Data smoothing interval is currently set at 10 seconds.
- It is set to calculate the flux from exactly 3 time-mass .csv files.
- Program is configured for specific output files of a specific type of load cells
  - The program expects specific header names from time-mass data files.
  - The time-mass data files must be named 'Channel_0.csv', 'Channel_1.csv', and 'Channel_2.csv'
- Units of inputs and outputs are set
- Pressure measurement must be recorded during the experiment manually to be included in the test conditions file.
- If there are multiple or no mass values for a specified test time the program will error.
  - This may occur because load cell time interval my not be exactly 1 second (i.e. 1.001 second).

### Built With

- [Python](https://www.python.org/) - A high-level programming language used for general-purpose programming.

## Features

- Feature 1: Reading time-mass data, inputs and test conditions from .csv files.
- Feature 2: Applying data smoothing to the mass values.
- Feature 3: Finding mass values at the start and end of the specified test windows.
- Feature 4: Calculating flux from changes in mass and membrane properties.
- Feature 5: Generating outputs.csv file from analysis results.

## Getting Started

### Prerequisites

Python 3.7+
numpy
pandas

### Installation

Obtain access to the private GitHub project from Timothy Warner

## Usage

- Update the files constants.csv and test_conditions.csv. 
- Ensure there are data files for analysis and the file name and path match the code.
- Run the python code
- Flux data stored in outputs.csv


## Configuration


constants.csv file contains:
  - Hollow fiber membrane length (Length (cm))
  - Hollow fiber membrane outside diameter (Diameter (mm))
  - Number of fibers tested simultaneously (number of hollow fibers flowing to a single load cell)
  - The length of time over which the mass change will be measured for flux calculations (Test Duration (s))

Format:
Length (cm),	Diameter (mm),	Number of fibers,	Test Duration (s)
10.0,		1.2,		3.0,			60


test_conditions.csv file contains:
  - The time at which the mass change measurement begins (Measurement Start time (24hr time))
  - The transmembrane pressure at which the experiment is taking place (Pressure (PSI))

Format:
Measurement Start time (24hr time),Pressure (PSI)
19:23:00, 				19.5
18:56:00,			 	29.7
18:31:00,				39.7
18:05:00,				50.0


The time-mass data files must be named 'Channel_0.csv', 'Channel_1.csv', and 'Channel_2.csv' and placed in the folder 'Data'. The 'Date' data column must contain a time formatted HH:MM:SS but does not matter if a date or fractional second is included or not. There must be exactly 1 mass measurement per second or an error may occur.

Format:
Date,Weight [Bridge Input Ch:0 -> 1046 S/N:583686]
2024-05-06 17:48:10.060226,284.226583810652
2024-05-06 17:48:11.060226,284.228423359392
2024-05-06 17:48:12.060226,284.199012290971
2024-05-06 17:48:13.060226,284.176953496213
2024-05-06 17:48:14.060226,284.219231536988
2024-05-06 17:48:15.060226,284.156732276431
2024-05-06 17:48:16.060226,284.140188180363
2024-05-06 17:48:17.060226,284.147542427792
2024-05-06 17:48:18.060226,284.145702879053
2024-05-06 17:48:19.060226,284.221071085728


## Contributing

Contact Timothy Warner to contribute.

## Roadmap

- [x] Development of minimum viable code to calculate flux based on the provided data and inputs
- [ ] Graphical user interface (GUI)
    - [ ] Modify inputs file based on GUI
    - [ ] Select data files for analysis
    - [ ] Run button for the script
    - [ ] (Optional) – provide additional setting such as:
      - [ ] Choosing between flat sheet and hollow fiber membrane
      - [ ] Choosing the number of data files to read and analyse – between 1 and 9 files
      - [ ] Choosing input and output units – metric vs imperial
- [ ] Improved functionality
    - [ ] Linear regression of flux values to calculate permeance of each data set
    - [ ] Plotting of flux vs pressure
      - [ ] Generating to copy-paste
      - [ ] Saving of image files
    - [ ] Generation of useful test statistics
    - [ ] Generalising the code, so it can function with different time intervals and different rolling average windows.
    - [ ] Allow for the addition of pressure data logging
- [ ] Quality Control
    - [ ] Ensure the code functions as expected.
    - [ ] Provide useful error messages and guide users to error free use of the software.
- [ ] Packaging of code to standalone application
    - [ ] Generate .exe so the program can be run without installing python
    - [ ] Ensure the standard of the code is high and fit to be published on GitHub and subsequent software journals including organised documentation and sufficient quality control and de-bugging


## Contact

Timothy Warner - warnet2@mcmaster.ca

## Acknowledgements

- Project contributors: Timothy Warner, Negar Takhsha
- [Python](https://www.python.org/) - A high-level programming language used for general-purpose programming.
- [NumPy](https://numpy.org/) - A fundamental package for scientific computing with Python.
- [pandas](https://pandas.pydata.org/) - A powerful data analysis and manipulation library for Python.
- [Matplotlib](https://matplotlib.org/) - A comprehensive library for creating static, animated, and interactive visualizations in Python.
